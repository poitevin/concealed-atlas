{"ast":null,"code":"import _objectSpread from\"/Users/poitevin/apps/concealed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useEffect,useLayoutEffect}from\"react\";import\"./App.css\";import airportData from\"./airportData.json\";import linesData from\"./linesData.json\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const airportCodes=\"CON-CEA-LED-ATL-ASO-FOU-RAP-PRO-ACH-ING-DEM-ISE\\n\\nINT-HED-IST-ORT-EDW-ORL-DTR-UTH-ISJ-UST-AMO-MEN-TOF-IMP-OST-URE\\nGUY-DEB-ORD\\n\\nATD-AWN-THE-LIL-TOF-ASM-ALL-ROB-INS-SON-GPI-ERC-EST-HED-USH\\nAND-HIG-HAB-OVE-CON-TRA-ILS-WRI-TET-HEI-RLO-NGS-YMB-OLI-CSC-ARS\\nEAR-LYR-ISE-RSW-ATE-RGA-RDE-NSL-IST-ENI-NGI-NTE-NTL-YCO-MMU-TER-BUS-TLE\\nDOE-SNO-TYE-TFI-LLT-HES-TRE-ETS-AND-THE-ROB-INC-HIR-PSI-TST-UNE\\nEAR-THC-RUM-BLE-SBE-TWE-ENF-ING-ERS-AND-WEH-ARV-EST-AIR\\nTHI-NAS-COD-ETH-ISI-STH-EWO-RLD-WEH-OLD-WET-HIN-KAG-AIN\\nSEN-SIN-GMI-NER-ALL-OSS\\n\\nATE-IGH-TTH-EMA-RKE-TSF-ILL-WIT-HBR-ILL-IAN-TCA-RGO\\nVAL-ENC-IAB-LOO-DOR-ANG-ESR-IPE-CAM-BRI-DGE-STR-AWB-ERR-IES\\nHUN-GAR-IAN-MAR-ASC-HIN-OCH-ERR-IES-IRA-NIA-NPE-ARL-CAV-IAR\\nTUR-KIS-HGO-LDS-AFF-RON-THE-LIF-TIN-GST-ACK-ING-AND-ARR-ANG-ING\\nOFJ-ARS-BOX-ESB-UND-LES-CRA-TES-CRE-ATE-SMO-UNT-AIN-SOF-RIC-HES\\nVOI-CES-BLE-NDA-GAI-NST-THE-MAR-KET-STA-LLS\\nAND-WEL-EAR-NTO-REA-DTH-EWO-RLD\\n\\nTHE-MIN-DTA-KES-FLI-GHT-MID-MOR-NIN-GST-RIV-ING-FOR\\nASW-ANS-HIG-HRE-ACH-OVE-RST-ORM-SWO-LLE-NSK-IES\\nFLI-GHT-PAT-HSR-EVE-ALT-HEE-ART-HIN-STE-ADY-MOT-ION\\nWET-RAC-ETH-EMA-RKS-ACR-OSS-THI-SCO-DED-POE-TRY\\nWEA-RET-HES-YMB-OLS-AND-WRI-TER-SOF-THE-SYS-TEM\\nWEA-RET-HEH-ARD-WAR-EAN-DSO-FTW-ARE-OFI-TSF-LUX\\nWEA-RET-HEW-ATC-HER-SAN-DTH-EDO-OMO-FWA-TCH-ING\\n\\nDEE-PIN-TOA-FTE-RNO-ONL-IGH-TSP-ANS-RIV-ERS-AND-FIE-LDS\\nAND-FAR-MSF-ORM-GRI-DSO-URE-YES-ABS-ORB-ING\\nFRO-MUP-HIG-HVA-RIE-TIE-SOF-TEX-TUR-ESE-ETH-ISP-LAN-ETS\\nVAS-TPL-AIN-SME-ETB-LUE-BLA-CKS-KIE-SAL-ONG-ASI-LKY-ARC\\nASC-LOU-DSV-ANI-SHI-NCO-MMO-TIO-NPA-STT-HEM-OUN-TAI-NRA-NGE\\nTIM-EDW-IND-LES-TOA-NIN-STA-NTO-FFL-ASH-EAR-THD-ARK-ENS\\nAND-ADO-OMS-DAY-PRA-YER-HOV-ERS-OVE-RLO-NGB-LAD-ESO-FNI-GHT\";const poem=\"Concealed Atlas of Our Approaching Demise\\n\\n\\\"In the distorted world, truth is just a moment of imposture\\\"\\n                                \\u2013 Guy Debord\\n\\nAt dawn, the lilt of a small robin's song pierces the hush\\nand high above contrails write their long symbolic scars.\\nEarly risers water gardens, listening intently. Commuter bustle\\ndoes not yet fill the streets, and the robin chirps its tune.\\nEarth crumbles between fingers and we harvest air\\nthin as code. This is the world we hold, we think again,\\nsensing mineral loss.\\n\\nAt eight, the markets fill with brilliant cargo:\\nValencia blood oranges, ripe Cambridge strawberries,\\nHungarian maraschino cherries, Iranian pearl caviar,\\nTurkish gold saffron. The lifting, stacking, and arranging\\nof jars, boxes, bundles, and crates creates mountains of riches.\\nVoices blend against the market stalls\\nand we learn to read the world.\\n\\nThe mind takes flight, midmorning, striving for\\na swan's high reach over stormswollen skies.\\nFlight paths reveal the Earth in steady motion.\\nWe trace the marks across this coded poetry.\\nWe are the symbols and writers of the system.\\nWe are the hardware and software of its flux.\\nWe are the watchers and the doom of watching.\\n\\nDeep into afternoon, light spans rivers and fields,\\nand farms form grids, our eyes absorbing\\nfrom up high, varieties of texture. See this planet's\\nvast plains meet blueblack skies along a silky arc.\\nAs clouds vanish in commotion past the mountain range,\\ntime dwindles to an instant of flash, Earth darkens,\\nand a doomsday prayer hovers over long blades of night.\";const findAirportByCode=code=>{return airportData.find(a=>a.code===code);};const App=()=>{const[bubbleStyle,setBubbleStyle]=useState({top:\"-1000px\",left:\"-1000px\"});const setBubblePosition=(rect,type)=>{const contentRect=displayRef.current.getBoundingClientRect();const infoBubbleRect=bubbleRef.current.getBoundingClientRect();const AL=rect.left;const AR=contentRect.width-rect.right;const AT=rect.top;const AB=contentRect.height-rect.bottom;const maxHorizontalSpace=Math.max(AL,AR);const maxVerticalSpace=Math.max(AT,AB);const bubbleStyle={display:\"block\"};if(type===\"line\"){bubbleStyle.left=rect.left+(rect.width-infoBubbleRect.width)/2;}else{if(maxHorizontalSpace===AL){bubbleStyle.left=rect.left-infoBubbleRect.width;}else{bubbleStyle.left=rect.right;}}if(maxVerticalSpace===AT){bubbleStyle.top=rect.top-infoBubbleRect.height;}else{bubbleStyle.top=rect.bottom;}setBubbleStyle(bubbleStyle);};const[selectedAirport,setSelectedAirport]=useState(null);const[displayPoem,setDisplayPoem]=useState(true);const displayRef=useRef();const[selectedLineData,setSelectedLineData]=useState(null);const[selectedCode,setSelectedCode]=useState(null);const bubbleRef=useRef();const[highlightedLine,setHighlightedLine]=useState(null);// Helper function to classify emissions intensity\nconst getEmissionsIntensity=carbonFootprint=>{const match=carbonFootprint.match(/[\\d,]+\\.?\\d*/);if(!match)return'normal';const emissions=parseFloat(match[0].replace(/,/g,''));const highEmissionThreshold=1500000;return emissions>highEmissionThreshold?'high':'normal';};useEffect(()=>{if(selectedAirport&&selectedCode&&bubbleRef.current&&displayRef.current){const codeTarget=document.querySelector(\".code.selected-code\");if(codeTarget){const rect=codeTarget.getBoundingClientRect();setBubblePosition(rect,\"code\");}}},[selectedAirport,selectedCode]);useLayoutEffect(()=>{if(selectedLineData&&bubbleRef.current&&displayRef.current){const lineElement=document.querySelector(\".poem-line.highlighted-line\");if(lineElement){const rect=lineElement.getBoundingClientRect();setBubblePosition(rect,\"line\");}}},[selectedLineData]);const handleLineClick=(event,globalLineIndex)=>{event.stopPropagation();if(linesData[globalLineIndex]){setSelectedLineData(linesData[globalLineIndex]);setHighlightedLine(globalLineIndex);const rect=event.target.getBoundingClientRect();setBubblePosition(rect,\"line\");}};const handleClick=event=>{if(event.target.classList.contains(\"poem-text\")){const lineElement=event.target.closest(\".poem-line\");if(lineElement){handleLineClick(event,parseInt(lineElement.dataset.index,10));return;}}const codeTarget=event.target.closest(\".code\");if(codeTarget){const tappedCode=codeTarget.textContent;const airport=findAirportByCode(tappedCode);setSelectedAirport(airport);setSelectedCode(tappedCode);setHighlightedLine(null);if(bubbleRef.current&&displayRef.current){const rect=codeTarget.getBoundingClientRect();setBubblePosition(rect,\"code\");}return;}if(!event.target.closest(\".info-bubble\")){if(!selectedAirport&&!selectedLineData){setDisplayPoem(!displayPoem);}else{setSelectedAirport(null);setSelectedLineData(null);setSelectedCode(null);setHighlightedLine(null);setBubbleStyle({top:\"-1000px\",left:\"-1000px\"});}}};let globalLineIndex=0;return/*#__PURE__*/_jsx(\"div\",{className:\"App\",ref:displayRef,onClick:handleClick,children:/*#__PURE__*/_jsxs(\"div\",{className:\"content-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"credits-container\",children:/*#__PURE__*/_jsx(\"span\",{className:\"credits-text\",children:\"Poem: Pedro Poitevin | Photo: Arturo Godoy\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"content-window\".concat(selectedAirport?\" selected-airport\":selectedLineData?\" selected-line-data\":\"\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"content-window\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"responsive-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"monospace\",children:displayPoem?poem.split(\"\\n\\n\").map((stanza,stanzaIndex)=>/*#__PURE__*/_jsx(\"div\",{className:\"stanza\",children:stanza.split(\"\\n\").map(line=>{const currentLineIndex=globalLineIndex++;return/*#__PURE__*/_jsx(\"div\",{\"data-index\":currentLineIndex,className:\"poem-line \".concat(highlightedLine===currentLineIndex?\"highlighted-line\":\"\"),children:/*#__PURE__*/_jsx(\"div\",{className:\"poem-text-container\",children:/*#__PURE__*/_jsx(\"span\",{className:\"poem-text\",children:line})})},currentLineIndex);})},stanzaIndex)):airportCodes.split(\"\\n\\n\").map((stanza,stanzaIndex)=>/*#__PURE__*/_jsx(\"div\",{className:\"stanza\",children:stanza.split(\"\\n\").map((line,lineIndex)=>/*#__PURE__*/_jsx(\"div\",{className:lineIndex===0?\"airport-codes-title\":\"\",children:line.split(\"-\").map((code,idx)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"code\".concat(selectedCode===code?\" selected-code\":\"\"),children:code}),idx!==line.split(\"-\").length-1&&\"-\"]},idx))},\"\".concat(stanzaIndex,\"-\").concat(lineIndex)))},stanzaIndex))})}),/*#__PURE__*/_jsxs(\"div\",{ref:bubbleRef,className:\"info-bubble\".concat(selectedAirport||selectedLineData?\" show-info\":\"\"),style:_objectSpread(_objectSpread({},bubbleStyle),{},{backgroundImage:selectedAirport?\"url(\".concat(selectedAirport.static_map_url,\")\"):\"none\",backgroundSize:selectedAirport?\"cover\":\"none\"}),children:[selectedAirport&&/*#__PURE__*/_jsx(\"div\",{className:\"airport-info-window info-window\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"airport-name\",children:/*#__PURE__*/_jsx(\"strong\",{children:selectedAirport.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"country\",children:/*#__PURE__*/_jsx(\"strong\",{children:selectedAirport.country})})]})}),selectedLineData&&/*#__PURE__*/_jsx(\"div\",{className:\"line-data-window info-window line-data-window-custom\",\"data-high-emissions\":getEmissionsIntensity(selectedLineData[\"carbon-footprint\"])==='high',children:/*#__PURE__*/_jsxs(\"div\",{className:\"line-data\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"itinerary\",children:/*#__PURE__*/_jsx(\"strong\",{children:selectedLineData.itinerary})}),/*#__PURE__*/_jsx(\"div\",{style:{margin:\"10px 0\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"length\",children:/*#__PURE__*/_jsx(\"strong\",{children:selectedLineData.length})}),/*#__PURE__*/_jsx(\"div\",{style:{margin:\"10px 0\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"carbon-footprint\",children:/*#__PURE__*/_jsx(\"strong\",{children:selectedLineData[\"carbon-footprint\"]})})]})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"cta-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"cta-button\",children:\"Tap Anywhere to Explore\"})})]})});};export default App;","map":{"version":3,"names":["React","useState","useRef","useEffect","useLayoutEffect","airportData","linesData","jsx","_jsx","jsxs","_jsxs","airportCodes","poem","findAirportByCode","code","find","a","App","bubbleStyle","setBubbleStyle","top","left","setBubblePosition","rect","type","contentRect","displayRef","current","getBoundingClientRect","infoBubbleRect","bubbleRef","AL","AR","width","right","AT","AB","height","bottom","maxHorizontalSpace","Math","max","maxVerticalSpace","display","selectedAirport","setSelectedAirport","displayPoem","setDisplayPoem","selectedLineData","setSelectedLineData","selectedCode","setSelectedCode","highlightedLine","setHighlightedLine","getEmissionsIntensity","carbonFootprint","match","emissions","parseFloat","replace","highEmissionThreshold","codeTarget","document","querySelector","lineElement","handleLineClick","event","globalLineIndex","stopPropagation","target","handleClick","classList","contains","closest","parseInt","dataset","index","tappedCode","textContent","airport","className","ref","onClick","children","concat","split","map","stanza","stanzaIndex","line","currentLineIndex","lineIndex","idx","Fragment","length","style","_objectSpread","backgroundImage","static_map_url","backgroundSize","name","country","itinerary","margin"],"sources":["/Users/poitevin/apps/concealed/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useLayoutEffect } from \"react\";\nimport \"./App.css\";\nimport airportData from \"./airportData.json\";\nimport linesData from \"./linesData.json\";\n\nconst airportCodes = `CON-CEA-LED-ATL-ASO-FOU-RAP-PRO-ACH-ING-DEM-ISE\n\nINT-HED-IST-ORT-EDW-ORL-DTR-UTH-ISJ-UST-AMO-MEN-TOF-IMP-OST-URE\nGUY-DEB-ORD\n\nATD-AWN-THE-LIL-TOF-ASM-ALL-ROB-INS-SON-GPI-ERC-EST-HED-USH\nAND-HIG-HAB-OVE-CON-TRA-ILS-WRI-TET-HEI-RLO-NGS-YMB-OLI-CSC-ARS\nEAR-LYR-ISE-RSW-ATE-RGA-RDE-NSL-IST-ENI-NGI-NTE-NTL-YCO-MMU-TER-BUS-TLE\nDOE-SNO-TYE-TFI-LLT-HES-TRE-ETS-AND-THE-ROB-INC-HIR-PSI-TST-UNE\nEAR-THC-RUM-BLE-SBE-TWE-ENF-ING-ERS-AND-WEH-ARV-EST-AIR\nTHI-NAS-COD-ETH-ISI-STH-EWO-RLD-WEH-OLD-WET-HIN-KAG-AIN\nSEN-SIN-GMI-NER-ALL-OSS\n\nATE-IGH-TTH-EMA-RKE-TSF-ILL-WIT-HBR-ILL-IAN-TCA-RGO\nVAL-ENC-IAB-LOO-DOR-ANG-ESR-IPE-CAM-BRI-DGE-STR-AWB-ERR-IES\nHUN-GAR-IAN-MAR-ASC-HIN-OCH-ERR-IES-IRA-NIA-NPE-ARL-CAV-IAR\nTUR-KIS-HGO-LDS-AFF-RON-THE-LIF-TIN-GST-ACK-ING-AND-ARR-ANG-ING\nOFJ-ARS-BOX-ESB-UND-LES-CRA-TES-CRE-ATE-SMO-UNT-AIN-SOF-RIC-HES\nVOI-CES-BLE-NDA-GAI-NST-THE-MAR-KET-STA-LLS\nAND-WEL-EAR-NTO-REA-DTH-EWO-RLD\n\nTHE-MIN-DTA-KES-FLI-GHT-MID-MOR-NIN-GST-RIV-ING-FOR\nASW-ANS-HIG-HRE-ACH-OVE-RST-ORM-SWO-LLE-NSK-IES\nFLI-GHT-PAT-HSR-EVE-ALT-HEE-ART-HIN-STE-ADY-MOT-ION\nWET-RAC-ETH-EMA-RKS-ACR-OSS-THI-SCO-DED-POE-TRY\nWEA-RET-HES-YMB-OLS-AND-WRI-TER-SOF-THE-SYS-TEM\nWEA-RET-HEH-ARD-WAR-EAN-DSO-FTW-ARE-OFI-TSF-LUX\nWEA-RET-HEW-ATC-HER-SAN-DTH-EDO-OMO-FWA-TCH-ING\n\nDEE-PIN-TOA-FTE-RNO-ONL-IGH-TSP-ANS-RIV-ERS-AND-FIE-LDS\nAND-FAR-MSF-ORM-GRI-DSO-URE-YES-ABS-ORB-ING\nFRO-MUP-HIG-HVA-RIE-TIE-SOF-TEX-TUR-ESE-ETH-ISP-LAN-ETS\nVAS-TPL-AIN-SME-ETB-LUE-BLA-CKS-KIE-SAL-ONG-ASI-LKY-ARC\nASC-LOU-DSV-ANI-SHI-NCO-MMO-TIO-NPA-STT-HEM-OUN-TAI-NRA-NGE\nTIM-EDW-IND-LES-TOA-NIN-STA-NTO-FFL-ASH-EAR-THD-ARK-ENS\nAND-ADO-OMS-DAY-PRA-YER-HOV-ERS-OVE-RLO-NGB-LAD-ESO-FNI-GHT`;\n\nconst poem = `Concealed Atlas of Our Approaching Demise\n\n\"In the distorted world, truth is just a moment of imposture\"\n                                – Guy Debord\n\nAt dawn, the lilt of a small robin's song pierces the hush\nand high above contrails write their long symbolic scars.\nEarly risers water gardens, listening intently. Commuter bustle\ndoes not yet fill the streets, and the robin chirps its tune.\nEarth crumbles between fingers and we harvest air\nthin as code. This is the world we hold, we think again,\nsensing mineral loss.\n\nAt eight, the markets fill with brilliant cargo:\nValencia blood oranges, ripe Cambridge strawberries,\nHungarian maraschino cherries, Iranian pearl caviar,\nTurkish gold saffron. The lifting, stacking, and arranging\nof jars, boxes, bundles, and crates creates mountains of riches.\nVoices blend against the market stalls\nand we learn to read the world.\n\nThe mind takes flight, midmorning, striving for\na swan's high reach over stormswollen skies.\nFlight paths reveal the Earth in steady motion.\nWe trace the marks across this coded poetry.\nWe are the symbols and writers of the system.\nWe are the hardware and software of its flux.\nWe are the watchers and the doom of watching.\n\nDeep into afternoon, light spans rivers and fields,\nand farms form grids, our eyes absorbing\nfrom up high, varieties of texture. See this planet's\nvast plains meet blueblack skies along a silky arc.\nAs clouds vanish in commotion past the mountain range,\ntime dwindles to an instant of flash, Earth darkens,\nand a doomsday prayer hovers over long blades of night.`;\n\nconst findAirportByCode = (code) => {\n  return airportData.find((a) => a.code === code);\n};\n\nconst App = () => {\n  const [bubbleStyle, setBubbleStyle] = useState({\n    top: \"-1000px\",\n    left: \"-1000px\",\n  });\n\n  const setBubblePosition = (rect, type) => {\n    const contentRect = displayRef.current.getBoundingClientRect();\n    const infoBubbleRect = bubbleRef.current.getBoundingClientRect();\n\n    const AL = rect.left;\n    const AR = contentRect.width - rect.right;\n    const AT = rect.top;\n    const AB = contentRect.height - rect.bottom;\n\n    const maxHorizontalSpace = Math.max(AL, AR);\n    const maxVerticalSpace = Math.max(AT, AB);\n\n    const bubbleStyle = {\n      display: \"block\",\n    };\n\n    if (type === \"line\") {\n      bubbleStyle.left = rect.left + (rect.width - infoBubbleRect.width) / 2;\n    } else {\n      if (maxHorizontalSpace === AL) {\n        bubbleStyle.left = rect.left - infoBubbleRect.width;\n      } else {\n        bubbleStyle.left = rect.right;\n      }\n    }\n\n    if (maxVerticalSpace === AT) {\n      bubbleStyle.top = rect.top - infoBubbleRect.height;\n    } else {\n      bubbleStyle.top = rect.bottom;\n    }\n\n    setBubbleStyle(bubbleStyle);\n  };\n\n  const [selectedAirport, setSelectedAirport] = useState(null);\n  const [displayPoem, setDisplayPoem] = useState(true);\n  const displayRef = useRef();\n  const [selectedLineData, setSelectedLineData] = useState(null);\n  const [selectedCode, setSelectedCode] = useState(null);\n  const bubbleRef = useRef();\n  const [highlightedLine, setHighlightedLine] = useState(null);\n\n  // Helper function to classify emissions intensity\n  const getEmissionsIntensity = (carbonFootprint) => {\n    const match = carbonFootprint.match(/[\\d,]+\\.?\\d*/);\n    if (!match) return 'normal';\n    \n    const emissions = parseFloat(match[0].replace(/,/g, ''));\n    const highEmissionThreshold = 1500000;\n    \n    return emissions > highEmissionThreshold ? 'high' : 'normal';\n  };\n\n  useEffect(() => {\n    if (\n      selectedAirport &&\n      selectedCode &&\n      bubbleRef.current &&\n      displayRef.current\n    ) {\n      const codeTarget = document.querySelector(`.code.selected-code`);\n      if (codeTarget) {\n        const rect = codeTarget.getBoundingClientRect();\n        setBubblePosition(rect, \"code\");\n      }\n    }\n  }, [selectedAirport, selectedCode]);\n\n  useLayoutEffect(() => {\n    if (selectedLineData && bubbleRef.current && displayRef.current) {\n      const lineElement = document.querySelector(`.poem-line.highlighted-line`);\n      if (lineElement) {\n        const rect = lineElement.getBoundingClientRect();\n        setBubblePosition(rect, \"line\");\n      }\n    }\n  }, [selectedLineData]);\n\n  const handleLineClick = (event, globalLineIndex) => {\n    event.stopPropagation();\n\n    if (linesData[globalLineIndex]) {\n      setSelectedLineData(linesData[globalLineIndex]);\n      setHighlightedLine(globalLineIndex);\n      const rect = event.target.getBoundingClientRect();\n      setBubblePosition(rect, \"line\");\n    }\n  };\n\n  const handleClick = (event) => {\n    if (event.target.classList.contains(\"poem-text\")) {\n      const lineElement = event.target.closest(\".poem-line\");\n      if (lineElement) {\n        handleLineClick(event, parseInt(lineElement.dataset.index, 10));\n        return;\n      }\n    }\n\n    const codeTarget = event.target.closest(\".code\");\n    if (codeTarget) {\n      const tappedCode = codeTarget.textContent;\n      const airport = findAirportByCode(tappedCode);\n      setSelectedAirport(airport);\n      setSelectedCode(tappedCode);\n      setHighlightedLine(null);\n      if (bubbleRef.current && displayRef.current) {\n        const rect = codeTarget.getBoundingClientRect();\n        setBubblePosition(rect, \"code\");\n      }\n      return;\n    }\n\n    if (!event.target.closest(\".info-bubble\")) {\n      if (!selectedAirport && !selectedLineData) {\n        setDisplayPoem(!displayPoem);\n      } else {\n        setSelectedAirport(null);\n        setSelectedLineData(null);\n        setSelectedCode(null);\n        setHighlightedLine(null);\n        setBubbleStyle({ top: \"-1000px\", left: \"-1000px\" });\n      }\n    }\n  };\n\n  let globalLineIndex = 0;\n\n  return (\n    <div className=\"App\" ref={displayRef} onClick={handleClick}>\n      <div className=\"content-container\">\n        <div className=\"credits-container\">\n          <span className=\"credits-text\">Poem: Pedro Poitevin | Photo: Arturo Godoy</span>\n        </div>\n        <div\n          className={`content-window${\n            selectedAirport\n              ? \" selected-airport\"\n              : selectedLineData\n              ? \" selected-line-data\"\n              : \"\"\n          }`}\n        >\n          <div className=\"content-window\">\n            <div className=\"responsive-container\">\n              <div className=\"monospace\">\n                {displayPoem\n                  ? poem.split(\"\\n\\n\").map((stanza, stanzaIndex) => (\n                      <div key={stanzaIndex} className=\"stanza\">\n                        {stanza.split(\"\\n\").map((line) => {\n                          const currentLineIndex = globalLineIndex++;\n                          return (\n                            <div\n                              key={currentLineIndex}\n                              data-index={currentLineIndex}\n                              className={`poem-line ${\n                                highlightedLine === currentLineIndex\n                                  ? \"highlighted-line\"\n                                  : \"\"\n                              }`}\n                            >\n                              <div className=\"poem-text-container\">\n                                <span className=\"poem-text\">{line}</span>\n                              </div>\n                            </div>\n                          );\n                        })}\n                      </div>\n                    ))\n                  : airportCodes.split(\"\\n\\n\").map((stanza, stanzaIndex) => (\n                      <div key={stanzaIndex} className=\"stanza\">\n                        {stanza.split(\"\\n\").map((line, lineIndex) => (\n                          <div\n                            key={`${stanzaIndex}-${lineIndex}`}\n                            className={\n                              lineIndex === 0 ? \"airport-codes-title\" : \"\"\n                            }\n                          >\n                            {line.split(\"-\").map((code, idx) => (\n                              <React.Fragment key={idx}>\n                                <span\n                                  className={`code${\n                                    selectedCode === code\n                                      ? \" selected-code\"\n                                      : \"\"\n                                  }`}\n                                >\n                                  {code}\n                                </span>\n                                {idx !== line.split(\"-\").length - 1 && \"-\"}\n                              </React.Fragment>\n                            ))}\n                          </div>\n                        ))}\n                      </div>\n                    ))}\n              </div>\n            </div>\n            <div\n              ref={bubbleRef}\n              className={`info-bubble${\n                selectedAirport || selectedLineData ? \" show-info\" : \"\"\n              }`}\n              style={{\n                ...bubbleStyle,\n                backgroundImage: selectedAirport\n                  ? `url(${selectedAirport.static_map_url})`\n                  : \"none\",\n                backgroundSize: selectedAirport ? \"cover\" : \"none\",\n              }}\n            >\n              {selectedAirport && (\n                <div className=\"airport-info-window info-window\">\n                  <div className=\"info\">\n                    <div className=\"airport-name\">\n                      <strong>{selectedAirport.name}</strong>\n                    </div>\n                    <div className=\"country\">\n                      <strong>{selectedAirport.country}</strong>\n                    </div>\n                  </div>\n                </div>\n              )}\n              {selectedLineData && (\n                <div \n                  className=\"line-data-window info-window line-data-window-custom\"\n                  data-high-emissions={getEmissionsIntensity(selectedLineData[\"carbon-footprint\"]) === 'high'}\n                >\n                  <div className=\"line-data\">\n                    <div className=\"itinerary\">\n                      <strong>{selectedLineData.itinerary}</strong>\n                    </div>\n                    <div style={{ margin: \"10px 0\" }} />\n                    <div className=\"length\">\n                      <strong>{selectedLineData.length}</strong>\n                    </div>\n                    <div style={{ margin: \"10px 0\" }} />\n                    <div className=\"carbon-footprint\">\n                      <strong>{selectedLineData[\"carbon-footprint\"]}</strong>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n        <div className=\"cta-container\">\n          <button className=\"cta-button\">Tap Anywhere to Explore</button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}